
### [Square Kaleidoscope](2.3.1-square-kaleidoscope.md)
CIKernel?


CIWarpKernel
kernel vec2 squareKaleidoscopeWarp (vec2 center, float size) {
    // offset by center and transform to unit square
    vec2 p = (destCoord() - center) / size;
!
!
!
    return (p * size) + center;
}
// calculate number of mirror reflections to get to this point
float z = abs(floor(p.x)) + abs(floor(p.y));



Square Kaleidoscope
CIColorKernel
```
kernel vec4 squareKaleidoscopeColor (__sample s, vec2 center, float size) {
    // offset by center and transform to unit square
    vec2 p = (destCoord() - center) / size;
!
!
!
    return vec4(s.rgb * k, s.a);
}
```
