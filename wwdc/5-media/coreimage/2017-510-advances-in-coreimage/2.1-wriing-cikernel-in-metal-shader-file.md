
[Write CIKernel in Metal shader file](2.1-wriing-cikernel-in-metal-shader-file.md)





### Step 1 : Write CIKernel in Metal shader file | p51~55

CIKernel Metal Library

New header file containing CIKernel extensions to the Metal Shading Language
* CIKernel data types
  * destination, sampler, sample_t
* CIKernel functions
  * premultiply, unpremultiply, srgb_to_linear, linear_to_srgb, compare, cossin, sincos


### // CIKernelMetalLib.h

```c
namespace coreimage {
 struct destination {
   float2  coord() const;
 }

 struct sampler {
    float2 transform(float2 p) const;
    float4 coord();
    float4 sample(float2 p) const;
    float2 extent()  const;
};



// ... }
};
```

Destination and Samplers



#### Example 1: CIWrapKernel


#### 2nd example: a color

#### 3rd example: general.
